#!/bin/bash
echo "Starting command shuffle script..."
# List of commands to shuffle
commands=("ls" "cat" "grep" "find" "head" "tail" "sort" "wc" "who" "date")
echo "Original commands: ${commands[]}"
# Remove aliases for commands both in current shell and .bashrc
for cmd in "${commands[@]}"; do
    if alias "$cmd" >/dev/null 2>&1; then
        echo "Removing alias for $cmd in current shell"
        unalias "$cmd"
    fi
    if grep -q "alias $cmd=" ~/.bashrc; then
        echo "Removing alias for $cmd in .bashrc"
        sed -i "/alias $cmd=/d" ~/.bashrc
    fi
done
# Shuffle the commands without self-mapping
shuffled_commands=()
while [ ${#shuffled_commands[@]} -lt ${#commands[@]} ]; do
    shuffled=$(shuf -e "${commands[@]}" | tr '\n' ' ')
    shuffled_commands=($shuffled)
    valid=true
    for i in $(seq 0 $((${#commands[@]} - 1))); do
        if [ "${commands[$i]}" == "${shuffled_commands[$i]}" ]; then
            valid=false
            break
        fi
    done
    [ "$valid" == true ] && break
done
echo "Shuffled commands: ${shuffled_commands[]}"
# Rename the binaries directly in /usr/bin
for i in $(seq 0 $((${#commands[@]} - 1))); do
    echo "Renaming /usr/bin/${commands[$i]} to /usr/bin/${commands[$i]}.tmp"
    mv "/usr/bin/${commands[$i]}" "/usr/bin/${commands[$i]}.tmp"
done
for i in $(seq 0 $((${#commands[@]} - 1))); do
    echo "Moving /usr/bin/${commands[$i]}.tmp to /usr/bin/${shuffled_commands[$i]}"
    mv "/usr/bin/${commands[$i]}.tmp" "/usr/bin/${shuffled_commands[$i]}"
done
echo "Command shuffle completed. The commands have been shuffled in /usr/bin."
echo "Final command mappings:"
for i in $(seq 0 $((${#commands[@]} - 1))); do
    echo "${commands[$i]} is now ${shuffled_commands[$i]}"
done
